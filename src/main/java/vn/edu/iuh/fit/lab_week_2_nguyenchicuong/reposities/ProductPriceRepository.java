package vn.edu.iuh.fit.lab_week_2_nguyenchicuong.reposities;import jakarta.persistence.NoResultException;import org.hibernate.Session;import org.hibernate.SessionFactory;import vn.edu.iuh.fit.lab_week_2_nguyenchicuong.connectDB.ConnectDB;import vn.edu.iuh.fit.lab_week_2_nguyenchicuong.models.ProductPrice;public class ProductPriceRepository extends CRUDRepository<ProductPrice,Long> {    private SessionFactory sessionFactory;    private Session session;    public ProductPriceRepository(Class<ProductPrice> enityClass) {        super(enityClass);        sessionFactory= ConnectDB.getInstance().getSessionFactory();    }    //Lấy giá sản phẩm theo id    public double getPriceById(long id) {        session = sessionFactory.getCurrentSession();        session.getTransaction().begin();        try {            Double price = (Double) session.createQuery("SELECT pp.price FROM ProductPrice pp WHERE pp.product.product_id=:id")                    .setParameter("id", id)                    .getSingleResult();            session.getTransaction().commit();            return price != null ? price : 0.0; // Tránh trả về null, nếu không tìm thấy giá        } catch (NoResultException e) {            // Xử lý khi không tìm thấy giá            session.getTransaction().rollback();            return 0.0;        } finally {            if (session.isOpen()) {                session.close();            }        }    }}